---
title: èƒŒåŒ…ä¹è®²ï¼ˆå…­ï¼‰ åˆ†ç»„èƒŒåŒ…
slug: knapsack-problem-06
tags: [èƒŒåŒ…ä¹è®², ç®—æ³•, åŠ¨æ€è§„åˆ’]
categories: ç®—æ³•
mathjax: true
date: 2020-07-12T07:31:38+08:00
lastmod: 2020-07-12T07:31:38+08:00
---

# ğŸ’ åˆ†ç»„èƒŒåŒ…é—®é¢˜ ([B ç«™å¤§é›ªè±-èƒŒåŒ…ä¹è®²ä¸“é¢˜ <i class="fa fa-external-link-alt"></i>](https://www.bilibili.com/video/BV1qt411Z7nE?from=search&seid=7823159650487960943))

## â“ é¢˜ç›®

> æœ‰ $N$ ç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸º $V$ çš„èƒŒåŒ…ã€‚
> æ¯ç»„ç‰©å“æœ‰è‹¥å¹²ä¸ªï¼ŒåŒä¸€ç»„å†…çš„ç‰©å“æœ€å¤šåªèƒ½é€‰ä¸€ä¸ªã€‚
> æ¯ä»¶ç‰©å“çš„ä½“ç§¯æ˜¯ $v_{ij}$ï¼Œä»·å€¼æ˜¯ $w_{ij}$ï¼Œå…¶ä¸­ $i$ æ˜¯ç»„å·ï¼Œ$j$ æ˜¯ç»„å†…ç¼–å·ã€‚
> æ±‚è§£å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿è¿™äº›ç‰©å“çš„æ€»ä½“ç§¯ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”æ€»ä»·å€¼æœ€å¤§ã€‚è¾“å‡ºæœ€å¤§ä»·å€¼ã€‚

<!--more-->

- **è¾“å…¥æ ¼å¼**

> ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œ$N,V$ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“ç»„æ•°å’ŒèƒŒåŒ…å®¹ç§¯ã€‚
> æ¥ä¸‹æ¥æœ‰ $N$ ç»„æ•°æ®ï¼š
>
> - æ¯ç»„æ•°æ®ç¬¬ä¸€è¡Œæœ‰ä¸€ä¸ªæ•´æ•° $S_i$ï¼Œè¡¨ç¤ºç¬¬ $i$ ä¸ªç‰©å“ç»„çš„ç‰©å“æ•°é‡ï¼›
> - æ¯ç»„æ•°æ®æ¥ä¸‹æ¥æœ‰ $S_i$ è¡Œï¼Œæ¯è¡Œæœ‰ä¸¤ä¸ªæ•´æ•° $v_{ij},w_{ij}$ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ $i$ ä¸ªç‰©å“ç»„çš„ç¬¬ $j$ ä¸ªç‰©å“çš„ä½“ç§¯å’Œä»·å€¼ï¼›

- **è¾“å‡ºæ ¼å¼**

> è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§ä»·å€¼

- **æ•°æ®èŒƒå›´**

> $0 < N,V \leq 100$ > $0 < v_i,w_i,s_i \leq 100$

## âœ… ä¸€èˆ¬è§£æ³•

### æ€è·¯

&emsp;&emsp;åˆ†ç»„èƒŒåŒ…å’Œå¤šé‡èƒŒåŒ…çš„æ€è·¯åšæ³•éƒ½å¾ˆåƒï¼Œå¤šé‡èƒŒåŒ…é—®é¢˜æ˜¯åœ¨æ¯æ¬¡è€ƒè™‘æ—¶ï¼Œå»å†³å®šæ‹¿å‡ ä¸ªå½“å‰ç‰©å“å³â€˜0ï¼Œ1ï¼Œ2ï¼Œ...â€™ï¼Œç›´åˆ°å½“å‰ç‰©å“çš„æ•°é‡ä¸Šé™ä¸ºæ­¢ï¼Œä¹Ÿå°±æ˜¯æœ‰ $s$ ç§å†³ç­–ã€‚è€Œåˆ†ç»„èƒŒåŒ…æ¯ç»„ç‰©å“çš„å†³ç­–æ˜¯æ‹¿ç¬¬å‡ ä¸ªï¼Œä¹Ÿå°±æ˜¯è¿˜æ˜¯æœ‰ $s$ ç§å†³ç­–ã€‚

### ä»£ç 

```c++
#include <iostream>
#include <cstring>
#include <algorithm>
using namespace std;

int main() {
    int N, V;
    cin >> N >> V;
    // å®šä¹‰æ•°ç»„å¹¶åˆå§‹åŒ–
    int dp[V + 1], last[V + 1];
    memset(dp, 0, sizeof(dp));
    int v, w, s;
    // çŠ¶æ€è½¬ç§»è®¡ç®—
    for (int i = 0; i < N; ++i) {
        memcpy(last, dp, sizeof(dp));
        cin >> s;
        while (s-- > 0) {
            cin >> v >> w;
            for (int j = V; j >= v; --j) {
                dp[j] = max(last[j - v] + w, dp[j]);
            }
        }
    }
    cout << dp[V] << endl;
    return 0;
}
```

- ç©ºé—´å¤æ‚åº¦ï¼š$O(V)$
- æ—¶é—´å¤æ‚åº¦ï¼š$O(N\ast V\ast s)$

### å¼•ç”³

&emsp;&emsp;å®é™…ä¸Šå¤šé‡èƒŒåŒ…æ˜¯åˆ†ç»„èƒŒåŒ…çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå°±æ˜¯å½“åˆ†ç»„èƒŒåŒ…ä¸€ç»„å†…çš„ç‰©å“åˆ†åˆ«æ˜¯ä¸€ç§ç‰©å“è¿›è¡Œ 1ã€2ã€...ã€s ä¸ªçš„æ‰“åŒ…æ—¶ï¼Œæ­¤æ—¶å’Œå¤šé‡èƒŒåŒ…çš„æ•ˆæœå°±æ˜¯ä¸€æ ·çš„ã€‚ä¹Ÿæ­£å› ä¸ºå¤šé‡èƒŒåŒ…æ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæ‰€ä»¥å®ƒæ‰ä¼šæœ‰ä¸¤ç§ä¼˜åŒ–æ–¹æ³•ï¼Œè€Œåˆ†ç»„èƒŒåŒ…åªèƒ½è¿›è¡Œä¸‰é‡å¾ªç¯è®¡ç®—ã€‚
