---
title: èƒŒåŒ…ä¹è®²ï¼ˆå››ï¼‰ æ··åˆèƒŒåŒ…
slug: knapsack-problem-04
tags: [èƒŒåŒ…ä¹è®², ç®—æ³•, åŠ¨æ€è§„åˆ’]
categories: ç®—æ³•
mathjax: true
date: 2020-07-11T10:55:43+08:00
lastmod: 2020-07-11T10:57:13+08:00
---

# ğŸ’ æ··åˆèƒŒåŒ…é—®é¢˜ ([B ç«™å¤§é›ªè±-èƒŒåŒ…ä¹è®²ä¸“é¢˜ <i class="fa fa-external-link-alt"></i>](https://www.bilibili.com/video/BV1qt411Z7nE?from=search&seid=7823159650487960943))

## â“ é¢˜ç›®

> æœ‰ $N$ ç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸º $V$ çš„èƒŒåŒ…ã€‚
> ç‰©å“ä¸€å…±æœ‰ä¸‰ç±»ï¼š
>
> - ç¬¬ä¸€ç±»ç‰©å“åªèƒ½ç”¨ 1 æ¬¡ï¼ˆ01 èƒŒåŒ…ï¼‰ï¼›
> - ç¬¬äºŒç±»ç‰©å“å¯ä»¥ç”¨æ— é™å¤šæ¬¡ï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰ï¼›
> - ç¬¬ä¸‰ç±»ç‰©å“æœ€å¤šåªèƒ½ç”¨ $s_i$ æ¬¡ï¼ˆå¤šé‡èƒŒåŒ…ï¼‰ï¼›
>
> æ¯ç§ä½“ç§¯æ˜¯ $v_i$ï¼Œä»·å€¼æ˜¯ $w_i$ã€‚
> æ±‚è§£å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿è¿™äº›ç‰©å“çš„æ€»ä½“ç§¯ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”æ€»ä»·å€¼æœ€å¤§ã€‚è¾“å‡ºæœ€å¤§ä»·å€¼ã€‚

<!--more-->

- **è¾“å…¥æ ¼å¼**

> ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œ$N,V$ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“ç§æ•°å’ŒèƒŒåŒ…å®¹ç§¯ã€‚
> æ¥ä¸‹æ¥æœ‰ $N$ è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•° $v_i,w_i,s_i$ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ $i$ ä»¶ç‰©å“çš„ä½“ç§¯ã€ä»·å€¼å’Œæ•°é‡ã€‚
>
> - $s_i = -1$ è¡¨ç¤ºç¬¬ $i$ ç§ç‰©å“åªèƒ½ç”¨ 1 æ¬¡ï¼›
> - $s_i = 0$ è¡¨ç¤ºç¬¬ $i$ ç§ç‰©å“å¯ä»¥ç”¨æ— é™æ¬¡ï¼›
> - $s_i > 0$ è¡¨ç¤ºç¬¬ $i$ ç§ç‰©å“å¯ä»¥ç”¨ $s_i$ æ¬¡ï¼›

- **è¾“å‡ºæ ¼å¼**

> è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§ä»·å€¼

- **æ•°æ®èŒƒå›´**

> $0 < N,V \leq 100$ > $0 < v_i,w_i \leq 1000$ > $-1 < s_i \leq 1000$

## âœ… è§£å†³æ–¹æ¡ˆ

### æ€è·¯

&emsp;&emsp;åœ¨äº†è§£äº†ä¹‹å‰ä¸‰ä¸ªé—®é¢˜çš„åŸºç¡€ä¸Šï¼Œè¿™ä¸ªé—®é¢˜å®é™…ä¸Šå¹¶ä¸éš¾ï¼Œåªéœ€è¦æŒ‰ç…§ç±»åˆ«åˆ†åˆ«è®¡ç®—å°±è¡Œäº†ï¼Œå…¶ä¸­å¤šé‡èƒŒåŒ…åœ¨è¿™ç§æ•°æ®èŒƒå›´ä¸‹å¯ä»¥ç”¨ä¸€ä¸‹äºŒè¿›åˆ¶ä¼˜åŒ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ•´ä¸ªé—®é¢˜é‡Œå°±åªå­˜åœ¨ 01 å’Œå®Œå…¨ä¸¤ç§é—®é¢˜äº†ã€‚

### ä»£ç 

```c++
#include <iostream>
#include <cstring>
#include <algorithm>
#include <vector>
using namespace std;

struct Thing {
    int kind;
    int v, w;
};

int main() {
    int N, V;
    cin >> N >> V;
    int dp[V + 1];
    memset(dp, 0, sizeof(dp));
    vector<Thing> things;
    int v, w, s;
    for (int i = 0; i < N; ++i) {
        cin >> v >> w >> s;
        if (s < 0) things.push_back({-1, v, w});
        else if (s == 0) things.push_back({0, v, w});
        else {
            for (int k = 1; k <= s; k <<= 1) {
                s -= k;
                things.push_back({-1, k * v, k * w});
            }
            if (s > 0) things.push_back({-1, s * v, s * w});
        }
    }
    for (auto thing : things) {
        if (thing.kind < 0) {
            for (int j = V; j >= thing.v; --j) dp[j] = max(dp[j], dp[j - thing.v] + thing.w);
        } else {
            for (int j = thing.v; j <= V; ++j) dp[j] = max(dp[j], dp[j - thing.v] + thing.w);
        }
    }
    cout << dp[V] << endl;
    return 0;
}
```
